<!DOCTYPE html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Portfolio NeckTeck</title>
    <meta name="description" content="Portfolio professionnel - Candidature Formation Alegria" />
    <link rel="icon" href="./src/assets/1d341f5fc88320e0745cbad0ae811771.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&family=Merriweather:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./static-styles.css?v=9" />
    <!-- Styles essentiels pour la section comp√©tences (compatibilit√© Vite) -->
    <style>
        /* Styles pour la section Comp√©tences */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .skill-category {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
            transform: translateY(0);
        }

        .skill-category:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.15);
            border-color: hsl(var(--accent));
        }

        .skill-category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: hsl(var(--fg));
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .skill-category-title::before {
            content: "üí°";
            font-size: 1.1rem;
        }

        .skill-category:nth-child(1) .skill-category-title::before {
            content: "üé®";
        }

        .skill-category:nth-child(2) .skill-category-title::before {
            content: "‚öôÔ∏è";
        }

        .skill-category:nth-child(3) .skill-category-title::before {
            content: "üóÑÔ∏è";
        }

        .skill-category:nth-child(4) .skill-category-title::before {
            content: "üõ†Ô∏è";
        }

        .skills-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .skill-name {
            flex: 1;
            font-weight: 500;
            color: hsl(var(--fg));
            min-width: 120px;
        }

        .skill-bar {
            flex: 2;
            height: 8px;
            background: hsl(var(--muted));
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .skill-progress {
            height: 100%;
            background: linear-gradient(90deg, hsl(var(--accent)), hsl(var(--primary)));
            border-radius: 4px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .skill-level {
            font-weight: 600;
            color: hsl(var(--accent));
            min-width: 45px;
            text-align: right;
        }

        /* Responsive design pour les comp√©tences */
        @media (max-width: 768px) {
            .skills-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .skill-category {
                padding: 1.25rem;
            }

            .skill-name {
                min-width: 100px;
                font-size: 0.9rem;
            }

            .skill-bar {
                height: 6px;
            }

            .skill-level {
                font-size: 0.85rem;
                min-width: 40px;
            }
        }
    </style>
    <!-- html2canvas for thumbnail capture -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body>
    <!-- Musique d'ambiance tr√®s douce -->
    <audio id="background-music" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-slowmotion.mp3" type="audio/mpeg">
        <source src="https://www.bensound.com/bensound-music/bensound-slowmotion.ogg" type="audio/ogg">
    </audio>

    <!-- Sons de transition doux -->
    <audio id="transition-sound" preload="auto">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>

    <audio id="scroll-sound" preload="auto">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>

    <!-- Contr√¥le musique -->
    <div class="music-control" id="musicToggle" title="Activer/D√©sactiver la musique">
        <span class="music-icon">üéµ</span>
    </div>

    <!-- En-t√™te -->
    <header class="site-header">
        <div class="container header-inner">
            <div class="brand">Portfolio de NeckTeck</div>
            <nav class="nav">
                <a href="#hero" class="active">Accueil</a>
                <a href="#vision-motivation">Vision & Motivation</a>
                <a href="#projects">Projets</a>
                <a href="#skills">Comp√©tences</a>
                <a href="#contact">Contact</a>
                <span class="theme-dot" id="themeToggle" title="Th√®me">‚òº</span>
            </nav>
            <button class="nav-toggle" aria-label="Ouvrir le menu" aria-expanded="false">‚ò∞</button>
        </div>
    </header>

    <!-- Section Hero -->
    <section id="hero" class="hero">
        <div class="container hero-inner">

            <div class="hero-content">
                <h1 class="hero-title">
                    Bonjour, je suis<br />
                    <span class="title-accent serif">Candidat Alegria</span>
                </h1>
                <p class="hero-subtitle">
                    <br>D√©veloppeur Junior passionn√© par la tech, je suis anim√© par la volont√© d‚Äôinventer et d‚Äôam√©liorer
                    les
                    exp√©riences num√©riques de demain, en utilisant les leviers de l‚ÄôIA et des automatisations.
                    <br />
                    <br />
                </p>

                <div class="hero-actions">
                    <a href="#projects" class="btn btn-primary btn-caret">D√©couvrir mes Projets</a>
                    <a href="#contact" class="btn btn-outline">Me contacter</a>
                </div>
            </div>
            <div class="hero-card">
                <div class="card">
                    <div class="card-badge">Disponible</div>
                    <div class="avatar-wrap">
                        <img class="avatar" src="./src/assets/Avatar_NeckTeck.jpg" alt="Portrait du candidat" />
                    </div>
                    <div class="profile-name">NeckTeck</div>
                    <div class="profile-meta">Promotion Alegria 2025</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Vision & Motivation -->
    <section id="vision-motivation" class="section">
        <div class="container">
            <h2 class="section-title">Vision & Motivation</h2>
            <p id="animated-text" class="muted"><span id="animated-content"></span><span class="caret"
                    aria-hidden="true"></span></p>
            <style>
                #animated-text {
                    font-family: 'Merriweather', serif;
                    white-space: pre-wrap;
                    font-size: 1.0em;
                    text-align: left;
                    /* align text to the left */
                    display: block;
                    /* block-level so it aligns left in centered containers */
                    max-width: 65ch;
                    /* readability width */
                    letter-spacing: 0.01em;
                    /* subtle typewriter feel */
                    line-height: 1.4;
                    /* improve readability */
                    margin-inline: auto;
                    /* center the block while text stays left */
                }

                /* Very small screens: slightly tighter measure and spacing */
                @media (max-width: 400px) {
                    #animated-text {
                        max-width: 60ch;
                        line-height: 1.5;
                    }
                }

                /* Make each word an atomic inline element to prevent intra-word wrapping */
                #animated-text .word {
                    display: inline-flex;
                    /* keep characters of a word on the same line */
                    vertical-align: baseline;
                }

                /* Inline caret that only occupies the current line */
                #animated-text .caret {
                    display: inline-block;
                    width: 0.15em;
                    /* caret thickness */
                    height: 1em;
                    /* match line height */
                    margin-left: 2px;
                    background: currentColor;
                    vertical-align: -0.15em;
                    /* align with text baseline */
                    animation: caret-blink 1s steps(1) infinite;
                }

                @keyframes caret-blink {

                    0%,
                    50%,
                    100% {
                        opacity: 1;
                    }

                    25%,
                    75% {
                        opacity: 0;
                    }
                }

                /* Subtle per-character reveal */
                #animated-text .char {
                    opacity: 0;
                    display: inline-block;
                    animation: char-in 0.22s ease-out forwards;
                }

                @keyframes char-in {
                    from {
                        opacity: 0;
                        transform: translateY(0.08em);
                    }

                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                /* Respect reduced motion preferences */
                @media (prefers-reduced-motion: reduce) {
                    #animated-text .char {
                        animation: none;
                        opacity: 1;
                    }

                    #animated-text .caret {
                        animation-duration: 1.5s;
                    }
                }

                /* Visually hidden, still accessible to screen readers */
                .sr-only {
                    position: absolute;
                    width: 1px;
                    height: 1px;
                    padding: 0;
                    margin: -1px;
                    overflow: hidden;
                    clip: rect(0, 0, 0, 0);
                    white-space: nowrap;
                    border: 0;
                }
            </style>

            </p>
            <script>
                const text = `   Quel formidable outil qu‚Äôest Internet - Si jeune que l‚Äôon peut encore rencontrer son cr√©ateur vivant !
 Et pourtant, d√©j√†, une nouvelle √®re s‚Äôouvre : celle de l‚Äôintelligence artificielle.
 Une onde de choc qui va bouleverser le monde, transformer nos m√©tiers, nos fa√ßons de penser, de cr√©er, de collaborer - avec une cr√©ativit√© d√©cupl√©e, des process optimis√©s et une innovation acc√©l√©r√©e.

  Int√©grer la formation Alegria, c‚Äôest pour moi l‚Äôopportunit√© de prendre part √† cette r√©volution technologique, d‚Äôen √™tre acteur plut√¥t que spectateur.
 Un ticket pour contribuer √† fa√ßonner le monde de demain, en mettant mes comp√©tences au service de l‚Äôinnovation, du collectif et du progr√®s.
 Rejoindre Alegria, c‚Äôest int√©grer une dynamique o√π l‚Äôintelligence humaine et artificielle se rencontrent pour cr√©er, partager et grandir ensemble.

      Je monte vite en comp√©tence et je suis anim√© par l‚Äôenvie de comprendre, d‚Äôinnover et de contribuer √† des projets porteurs de sens.`;
                const target = document.getElementById("animated-content");
                const paragraph = document.getElementById("animated-text");
                let index = 0;
                let currentWord = null; // container span for the current word
                let animationStarted = false; // pour suivre si l'animation a d√©marr√©

                // Fit the final paragraph height to the viewport (no scroll)
                function fitParagraphToViewport() {
                    const header = document.querySelector('.site-header');
                    const container = paragraph.closest('.container');
                    const title = container.querySelector('.section-title');
                    const tags = container.querySelector('.tags');

                    const headerH = header ? header.offsetHeight : 0;
                    const vpH = window.innerHeight;
                    const sectionPadding = 40; // approximate inner paddings/margins
                    const titleH = title ? title.offsetHeight : 0;
                    const tagsH = tags ? tags.offsetHeight : 0;
                    const reserved = headerH + sectionPadding + titleH + tagsH;
                    const available = Math.max(100, vpH - reserved);

                    // Build measuring probe with same styles and width
                    const probe = document.createElement('p');
                    probe.className = paragraph.className;
                    const baseStyle = getComputedStyle(paragraph);
                    probe.style.cssText = baseStyle.cssText || '';
                    probe.style.position = 'absolute';
                    probe.style.visibility = 'hidden';
                    probe.style.left = '-9999px';
                    probe.style.whiteSpace = 'pre-wrap';
                    probe.style.maxWidth = baseStyle.maxWidth;
                    probe.textContent = text;
                    document.body.appendChild(probe);

                    // Binary search scale between 0.7x and 1.0x to fit available height
                    const baseFontPx = parseFloat(baseStyle.fontSize) || 16;
                    let lo = 0.6, hi = 1.0, best = 1.0, tries = 0;
                    while (tries++ < 12) {
                        const mid = (lo + hi) / 2;
                        probe.style.fontSize = (baseFontPx * mid) + 'px';
                        const h = probe.scrollHeight;
                        if (h <= available) { best = mid; lo = mid; } else { hi = mid; }
                    }

                    // Apply the best scale and set a stable min-height
                    paragraph.style.fontSize = (baseFontPx * best) + 'px';
                    probe.style.fontSize = (baseFontPx * best) + 'px';
                    const finalH = probe.scrollHeight;
                    paragraph.style.minHeight = finalH + 'px';
                    document.body.removeChild(probe);
                }

                function typeWriter() {
                    // Indiquer que l'animation est active
                    window.typewriterAnimationActive = true;

                    // Jouer le son de frappe seulement au d√©but de l'animation
                    if (index === 0) {
                        playTypingSound();
                    }

                    if (index < text.length) {
                        const raw = text.charAt(index);

                        if (raw === '\n') {
                            // close word and append a line break
                            if (currentWord) { currentWord = null; }
                            target.insertAdjacentHTML('beforeend', '<br />');
                        } else if (raw === ' ') {
                            // close word and append a real space text node
                            if (currentWord) { currentWord = null; }
                            target.insertAdjacentText('beforeend', ' ');
                        } else {
                            // ensure a word container exists
                            if (!currentWord) {
                                currentWord = document.createElement('span');
                                currentWord.className = 'word';
                                target.appendChild(currentWord);
                            }
                            // Basic HTML escape for safety and append char with fade-in
                            const escaped = raw
                                .replace(/&/g, '&amp;')
                                .replace(/</g, '&lt;')
                                .replace(/>/g, '&gt;');
                            const span = document.createElement('span');
                            span.className = 'char';
                            span.innerHTML = escaped;
                            currentWord.appendChild(span);
                        }

                        const ch = raw;
                        index++;

                        // Le son de frappe est jou√© une seule fois au d√©but, pas pour chaque caract√®re

                        // Announce by sentence for screen readers (optionnel - fonctionnalit√© d√©sactiv√©e)
                        if (/[.!?]/.test(ch) || index === text.length) {
                            // Cette fonctionnalit√© peut √™tre r√©activ√©e si n√©cessaire
                            // en ajoutant un √©l√©ment avec id="animated-live" dans le HTML
                        }

                        // Natural typing rhythm: base + jitter + punctuation pauses
                        const base = 25;
                        const jitter = Math.floor(Math.random() * 15) - 7; // -7..+7 ms
                        let extra = 0;
                        let shouldPauseAudio = false;
                        let pauseDuration = 0;
                        let shouldRestartAudio = false;

                        if (ch === ' ') extra += 10;            // no pause on spaces
                        if (ch === ',' || ch === ';' || ch === ':' || ch === '-') {
                            extra += 50;  // Pause Naturelle pour virgules
                        }
                        if (ch === '.' || ch === '!' || ch === '?') {
                            extra += 100;  // Pause plus longue en fin de phrase
                        }
                        if (ch === '\n') {
                            extra += 75;  // Pause pour retour √† la ligne
                        }

                        // Le son continue sans interruption pendant toute l'animation

                        const delay = Math.max(5, base + jitter + extra);
                        // Gestion des pauses audio pour la ponctuation
                        if (ch === '.' || ch === '!' || ch === '?') {
                            shouldRestartAudio = false;
                        }
                        if (ch === '\n') {
                            shouldPauseAudio = true;
                            // Pause plus longue pour les sauts de ligne apr√®s une fin de phrase (transition entre paragraphes)
                            if (shouldRestartAudio) {
                                pauseDuration = 50;  // Pause entre paragraphes
                            } else {
                                pauseDuration = 75;  // Pause normale pour les autres sauts de ligne
                            }
                            // R√©initialiser le flag pour √©viter les pauses inutiles
                            shouldRestartAudio = false;
                        }
                        // Appliquer les pauses audio si n√©cessaire
                        if (shouldPauseAudio) {
                            pauseTypingSound();
                            setTimeout(() => {
                                resumeTypingSound();
                                console.log('Prochain appel dans', delay, 'ms');
                                setTimeout(typeWriter, delay);
                            }, pauseDuration);
                        } else if (shouldRestartAudio) {
                            restartTypingSound();
                            console.log('Prochain appel dans', delay, 'ms');
                            setTimeout(typeWriter, delay);
                        } else {
                            console.log('Prochain appel dans', delay, 'ms');
                            setTimeout(typeWriter, delay);
                        }
                    } else {
                        console.log('Animation termin√©e');
                        // Indiquer que l'animation est termin√©e
                        window.typewriterAnimationActive = false;
                        // Arr√™ter le son quand l'animation est finie
                        stopTypingSound();
                    }
                }

                fitParagraphToViewport();
                // Refit when web fonts finish loading to account for font metrics changes
                if (document.fonts && document.fonts.ready) {
                    document.fonts.ready.then(() => {
                        fitParagraphToViewport();
                    });
                }
                // Refit on resize/orientation changes
                window.addEventListener('resize', () => {
                    fitParagraphToViewport();
                });
                window.addEventListener('orientationchange', () => {
                    fitParagraphToViewport();
                });

                // D√©marrer l'animation quand la section devient visible
                function startAnimationWhenVisible() {
                    const section = document.getElementById('vision-motivation');
                    if (!section) {
                        console.log('Section vision-motivation non trouv√©e');
                        return;
                    }
                    const rect = section.getBoundingClientRect();
                    // D√©tecter si la section est visible avec une marge plus g√©n√©reuse
                    const margin = 100; // 100px de marge
                    const isVisible = rect.top < (window.innerHeight - margin) && rect.bottom > margin;

                    console.log('Section visible:', isVisible, 'Rect top:', rect.top, 'Rect bottom:', rect.bottom, 'Window height:', window.innerHeight);

                    if (isVisible && !animationStarted) { // Si visible et animation pas encore d√©marr√©e
                        console.log('D√©marrage de l\'animation avec d√©lai');
                        animationStarted = true;
                        // Ajouter un petit d√©lai avant de d√©marrer l'animation
                        setTimeout(() => {
                            console.log('D√©marrage effectif de l\'animation');
                            typeWriter();
                        }, 500);
                    }
                }

                // Variables pour le contr√¥le pr√©cis du son
                let typingAudio = null;
                let typingAudioSource = null;
                let typingAudioContext = null;
                let isAudioPaused = false;
                let audioPausedAt = 0;

                // Variables globales pour la gestion du son (anciennement dans paragraph-sound-control.js)
                window.typingSoundEnabled = true;
                window.currentTypingAudio = null;

                // Flag pour contr√¥ler l'√©tat de l'animation
                window.typewriterAnimationActive = false;

                // üîß CHANGEZ CE FICHIER POUR TESTER DIFF√âRENTS SONS :
                // Option 1: 'clicky-keyboard-typing-361367.mp3' (572 KB)
                // Option 2: 'keyboard-typing-49404.mp3' (5.7 MB)
                // Option 3: 'keyboard-typing-5997.mp3' (312 KB)
                // Option 4: 'mechanical-keyboard-typing-treble-version-7055.mp3' (3.7 MB)
                // Option 5: 'clicky-keyboard-typing-361367.mp3' (nouveau son demand√©)
                const currentTypingSound = '/sounds/1-mechanical-keyboard-cherry-mx-brown-30628.mp3';
                const playbackRate = 1.15; // Vitesse de lecture 1.15x pour un effet plus doux

                // Fonction pour jouer un son de frappe avec MP3 synchronis√©
                function playTypingSound() {
                    console.log('üîä Son de frappe MP3 synchronis√©:', currentTypingSound);

                    try {
                        // Cr√©er l'AudioContext si n√©cessaire
                        if (!typingAudioContext) {
                            typingAudioContext = new (window.AudioContext || window.webkitAudioContext)();
                        }

                        // R√©activer le contexte si n√©cessaire
                        if (typingAudioContext.state === 'suspended') {
                            typingAudioContext.resume();
                        }

                        // Cr√©er l'√©l√©ment audio
                        typingAudio = new Audio(currentTypingSound);
                        typingAudio.volume = 0.4;
                        typingAudio.playbackRate = playbackRate; // Appliquer la vitesse de lecture 1.35x
                        typingAudio.loop = false; // S'assurer que le son ne boucle pas
                        typingAudio.addEventListener('ended', () => {
                            console.log('üîá Son de frappe termin√© naturellement');
                        });

                        // Cr√©er la source audio
                        typingAudioSource = typingAudioContext.createMediaElementSource(typingAudio);
                        typingAudioSource.connect(typingAudioContext.destination);

                        // Jouer le son
                        typingAudio.play().then(() => {
                            console.log('‚úÖ Son de frappe MP3 d√©marr√©');
                            isAudioPaused = false;
                            audioPausedAt = 0;
                        }).catch(error => {
                            console.log('‚ùå Erreur lecture MP3:', error);
                            // Secours avec son synth√©tique
                            playTypingSoundFallback();
                        });
                    } catch (error) {
                        console.log('‚ùå Erreur cr√©ation audio:', error);
                        // Secours avec son synth√©tique
                        playTypingSoundFallback();
                    }
                }

                // Fonction pour mettre en pause le son pendant les ponctuations
                function pauseTypingSound() {
                    if (typingAudio && !isAudioPaused && !typingAudio.paused) {
                        audioPausedAt = typingAudio.currentTime;
                        typingAudio.pause();
                        isAudioPaused = true;
                        console.log('‚è∏Ô∏è Son mis en pause √†', audioPausedAt.toFixed(2), 's');
                    }
                }

                // Fonction pour reprendre le son apr√®s les ponctuations
                function resumeTypingSound() {
                    if (typingAudio && isAudioPaused) {
                        typingAudio.currentTime = audioPausedAt;
                        typingAudio.play().then(() => {
                            isAudioPaused = false;
                            console.log('‚ñ∂Ô∏è Son repris √†', audioPausedAt.toFixed(2), 's');
                        }).catch(error => {
                            console.log('‚ùå Erreur reprise son:', error);
                        });
                    }
                }

                // Fonction pour arr√™ter le son quand l'animation est termin√©e
                function stopTypingSound() {
                    console.log('üõë Arr√™t forc√© du son de frappe...');

                    // Arr√™ter le son local de mani√®re agressive
                    if (typingAudio) {
                        try {
                            // Supprimer tous les event listeners
                            typingAudio.removeEventListener('ended', null);

                            // Forcer l'arr√™t imm√©diat
                            typingAudio.pause();
                            typingAudio.currentTime = 0;
                            typingAudio.loop = false;

                            // Si le son est toujours en cours, le d√©truire compl√®tement
                            if (!typingAudio.paused) {
                                typingAudio.src = ''; // Vider la source
                                typingAudio.load(); // Forcer le rechargement (qui arr√™tera tout)
                            }

                            console.log('‚èπÔ∏è Son local arr√™t√© et d√©truit - animation termin√©e');
                        } catch (e) {
                            console.log('‚ö†Ô∏è Erreur arr√™t son local:', e);
                        }
                    }

                    // Arr√™ter aussi le son global (pour compatibilit√©)
                    if (window.typingAudio) {
                        try {
                            window.typingAudio.pause();
                            window.typingAudio.currentTime = 0;
                            window.typingAudio.loop = false;
                            window.typingAudio.src = '';
                            window.typingAudio.load();
                            console.log('‚èπÔ∏è Son global arr√™t√© et d√©truit - animation termin√©e');
                        } catch (e) {
                            console.log('‚ö†Ô∏è Erreur arr√™t son global:', e);
                        }
                    }

                    // R√©initialiser les √©tats
                    isAudioPaused = false;
                    audioPausedAt = 0;
                    isRestarting = false;

                    // Nettoyer les ressources
                    if (typingAudioSource) {
                        try {
                            typingAudioSource.disconnect();
                            typingAudioSource = null;
                        } catch (e) {
                            console.log('‚ö†Ô∏è Erreur d√©connexion source audio:', e);
                        }
                    }

                    // Nettoyer le contexte audio
                    if (typingAudioContext) {
                        try {
                            if (typingAudioContext.state !== 'closed') {
                                typingAudioContext.close().then(() => {
                                    console.log('üîá Contexte audio ferm√©');
                                }).catch(e => console.log('‚ö†Ô∏è Erreur fermeture contexte:', e));
                            }
                            typingAudioContext = null;
                        } catch (e) {
                            console.log('‚ö†Ô∏è Erreur nettoyage contexte:', e);
                        }
                    }

                    // R√©initialiser compl√®tement les variables
                    typingAudio = null;
                    window.typingAudio = null;

                    console.log('‚úÖ Son de frappe compl√®tement arr√™t√© et nettoy√©');
                }

                // Verrou pour √©viter les conflits de red√©marrage
                let isRestarting = false;

                // Fonction pour g√©rer les pauses de son par caract√®re (int√©gr√©e depuis paragraph-sound-control.js)
                function handleCharacterPause(character, callback) {
                    let pauseDuration = 0;
                    let shouldPauseSound = false;

                    switch (character) {
                        case '\n':
                            pauseDuration = 150; // R√©duit pour animation plus fluide
                            shouldPauseSound = true;
                            console.log('üìÑ Saut de ligne d√©tect√©');
                            break;
                        case ',':
                        case ';':
                        case ':':
                            pauseDuration = 100; // R√©duit pour animation plus fluide
                            break;
                        case '.':
                        case '!':
                        case '?':
                            pauseDuration = 200; // R√©duit pour animation plus fluide
                            break;
                        case ' ':
                            pauseDuration = 30; // R√©duit pour animation plus fluide
                            break;
                    }

                    if (shouldPauseSound) {
                        pauseTypingSound();
                    }

                    if (pauseDuration > 0) {
                        setTimeout(() => {
                            if (shouldPauseSound) {
                                // V√©rifier si l'animation est encore en cours avant de reprendre le son
                                if (window.typewriterAnimationActive !== false) {
                                    resumeTypingSound();
                                } else {
                                    console.log('üîá Animation termin√©e, pas de reprise du son');
                                }
                            }
                            if (callback) callback();
                        }, pauseDuration);
                    } else if (callback) {
                        callback();
                    }
                }

                // Exporter la fonction handleCharacterPause globalement
                window.handleCharacterPause = handleCharacterPause;

                // Fonction pour red√©marrer le son depuis le d√©but (pour les fins de phrase)
                function restartTypingSound() {
                    // √âviter les red√©marrages simultan√©s
                    if (isRestarting) {
                        console.log('‚ö†Ô∏è Red√©marrage d√©j√† en cours, ignor√©');
                        return;
                    }

                    isRestarting = true;
                    console.log('üîÑ Red√©marrage du son depuis le d√©but');

                    try {
                        if (typingAudio) {
                            // Arr√™ter proprement le son actuel
                            typingAudio.pause();
                            typingAudio.currentTime = 0;

                            // Attendre un peu que l'arr√™t soit complet
                            setTimeout(() => {
                                // Recr√©er l'√©l√©ment audio pour un red√©marrage propre
                                typingAudio = new Audio(currentTypingSound);
                                typingAudio.volume = 0.4;
                                typingAudio.playbackRate = playbackRate; // Appliquer la vitesse de lecture 1.35x

                                // Recr√©er la connexion audio si n√©cessaire
                                if (typingAudioContext) {
                                    typingAudioSource = typingAudioContext.createMediaElementSource(typingAudio);
                                    typingAudioSource.connect(typingAudioContext.destination);
                                }

                                // D√©marrer le son depuis le d√©but
                                typingAudio.play().then(() => {
                                    isAudioPaused = false;
                                    audioPausedAt = 0;
                                    isRestarting = false;
                                    console.log('‚úÖ Son red√©marr√© depuis le d√©but');
                                }).catch(error => {
                                    console.log('‚ùå Erreur red√©marrage son:', error);
                                    isRestarting = false;
                                    // Secours avec son synth√©tique
                                    playTypingSoundFallback();
                                });
                            }, 50); // Petit d√©lai pour √©viter les conflits
                        } else {
                            // Si pas de son existant, en cr√©er un nouveau
                            playTypingSound();
                            isRestarting = false;
                        }
                    } catch (error) {
                        console.log('‚ùå Erreur red√©marrage son:', error);
                        isRestarting = false;
                        // Secours avec son synth√©tique
                        playTypingSoundFallback();
                    }
                }

                // Fonction de secours avec son synth√©tique
                function playTypingSoundFallback() {
                    console.log('üîä Son de frappe synth√©tique (secours)');

                    try {
                        if (!typingAudioContext) {
                            typingAudioContext = new (window.AudioContext || window.webkitAudioContext)();
                        }

                        if (typingAudioContext.state === 'suspended') {
                            typingAudioContext.resume();
                        }

                        const oscillator = typingAudioContext.createOscillator();
                        const gainNode = typingAudioContext.createGain();

                        oscillator.type = 'triangle';
                        oscillator.frequency.setValueAtTime(800, typingAudioContext.currentTime);
                        gainNode.gain.setValueAtTime(0.03, typingAudioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.005, typingAudioContext.currentTime + 0.015);

                        oscillator.connect(gainNode);
                        gainNode.connect(typingAudioContext.destination);

                        oscillator.start();
                        oscillator.stop(typingAudioContext.currentTime + 0.03);

                        console.log('‚úÖ Son de secours jou√©');
                    } catch (error) {
                        console.log('‚ùå Erreur son de secours:', error);
                    }
                }

                // Utiliser Intersection Observer pour une d√©tection plus fiable
                setTimeout(() => {
                    console.log('üöÄ Configuration de Intersection Observer');

                    if ('IntersectionObserver' in window) {
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting && !animationStarted) {
                                    console.log('üéØ Section d√©tect√©e par Intersection Observer avec d√©lai');
                                    animationStarted = true;
                                    // Ajouter un petit d√©lai avant de d√©marrer l'animation
                                    setTimeout(() => {
                                        console.log('D√©marrage effectif de l\'animation via Observer');
                                        typeWriter();
                                    }, 500);
                                    observer.unobserve(entry.target);
                                }
                            });
                        }, {
                            threshold: 0.1, // D√©clencher quand 10% de la section est visible
                            rootMargin: '0px 0px -50px 0px' // Marge n√©gative en bas
                        });

                        const section = document.getElementById('vision-motivation');
                        if (section) {
                            observer.observe(section);
                            console.log('‚úÖ Observer attach√© √† la section');
                        }
                    } else {
                        // Fallback pour les vieux navigateurs
                        console.log('üì± Fallback : d√©tection manuelle');
                        startAnimationWhenVisible();
                    }
                }, 100);

                window.addEventListener('scroll', startAnimationWhenVisible);
                window.addEventListener('resize', startAnimationWhenVisible);
            </script>
        </div>
    </section>

    <!-- Projets -->
    <section id="projects" class="section alt">
        <!-- Effets de fond spectaculaires -->
        <div class="energy-wave"></div>
        <div class="edge-glow"></div>
        <div class="concentric-circles">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        <div class="stars">
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
        </div>

        <div class="container">
            <h2 class="section-title">Projets</h2>
            <div class="grid">
                <article class="project" onclick="window.open('https://narutoversusbleach.1fr1.net/', '_blank')"
                    style="cursor: pointer;">
                    <div class="project-thumb">
                        <img src="https://narutoversusbleach.1fr1.net/" alt="Naruto Versus Bleach"
                            style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" />
                    </div>
                    <div class="project-body">
                        <h3 class="project-title">Naruto Versus Bleach</h3>
                        <p class="project-desc">Dashboard responsive avec graphiques, filtres et th√®mes clair/sombre.
                        </p>
                        <div class="project-meta">
                            <span>HTML5</span><span>CSS3</span><span>JavaScript</span>
                            <span>Responsive Design</span><span>Gaming</span>
                        </div>
                    </div>
                </article>
                <article class="project vitrine">
                    <div class="project-thumb">
                        <div class="mini"><img id="thumb-light" alt="Miniature th√®me clair" /></div>
                        <div class="mini"><img id="thumb-dark" alt="Miniature th√®me sombre" /></div>
                    </div>
                    <div class="project-body">
                        <h3 class="project-title">Portfolio</h3>
                        <p class="project-desc">Responsive design avec th√®me clair/sombre, animations fluides et
                            navigation
                            intuitive. Design moderne et performant, adapt√© √† tous les √©crans.</p>
                        <div class="project-meta">
                            <span>HTML5</span><span>CSS3</span><span>JavaScript</span>
                            <span>Responsive Design</span><span>CSS Variables</span>
                            <span>LocalStorage</span><span>API Web</span>
                        </div>
                    </div>
                </article>
                <article class="project">
                    <div class="project-thumb"></div>
                    <div class="project-body">
                        <h3 class="project-title">Composants UI</h3>
                        <p class="project-desc">Biblioth√®que de composants r√©utilisables (boutons, cartes, modales‚Ä¶).
                        </p>
                        <div class="project-meta">
                            <span>Design system</span><span>Accessibilit√©</span><span>Docs</span>
                        </div>
                    </div>
                </article>
                <article class="project vitrine" onclick="openChatbot()">
                    <div class="project-thumb"></div>
                    <div class="project-body">
                        <h3 class="project-title">NeckBot, l'IA √† votre service</h3>
                        <p class="project-desc">Assistant IA personnel interactif avec traitement du langage naturel.
                            Interface conversationnelle moderne, r√©ponses intelligentes et exp√©rience utilisateur
                            immersive.</p>
                        <div class="project-meta">
                            <span>JavaScript</span><span>NLP</span><span>Real-time</span>
                            <span>UI/UX</span><span>Interactive</span>
                        </div>
                    </div>
                </article>
                <article class="project" onclick="window.open('https://www.youtube.com/watch?v=zlWEOxQrOrc', '_blank')"
                    style="cursor: pointer;">
                    <div class="project-thumb">
                        <iframe
                            src="https://www.youtube.com/embed/N3jkWM5zpN0?autoplay=1&mute=1&loop=1&playlist=N3jkWM5zpN0&controls=0&showinfo=0&rel=0&modestbranding=1"
                            style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="project-body">
                        <p class="project-desc">Application web moderne de gestion de t√¢ches avec drag & drop,
                            notifications en
                            temps r√©el,
                            synchronisation cloud et interface utilisateur intuitive. Fonctionnalit√©s avanc√©es de
                            productivit√©.</p>
                        <div class="project-meta">
                            <span>React</span><span>Node.js</span><span>MongoDB</span>
                            <span>WebSocket</span><span>PWA</span>
                            <span>Drag & Drop</span>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Comp√©tences -->
    <section id="skills" class="section">
        <div class="container">
            <h2 class="section-title">Comp√©tences</h2>
            <div class="skills-grid">
                <div class="skill-category">
                    <h3 class="skill-category-title">Frontend</h3>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span class="skill-name">React</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 85%"></div>
                            </div>
                            <span class="skill-level">85%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">TypeScript</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 80%"></div>
                            </div>
                            <span class="skill-level">80%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">JavaScript</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 90%"></div>
                            </div>
                            <span class="skill-level">90%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">HTML/CSS</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 95%"></div>
                            </div>
                            <span class="skill-level">95%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">Tailwind CSS</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 88%"></div>
                            </div>
                            <span class="skill-level">88%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3 class="skill-category-title">Backend</h3>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span class="skill-name">Node.js</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 75%"></div>
                            </div>
                            <span class="skill-level">75%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">Express</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 70%"></div>
                            </div>
                            <span class="skill-level">70%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">Python</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 65%"></div>
                            </div>
                            <span class="skill-level">65%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">API REST</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 80%"></div>
                            </div>
                            <span class="skill-level">80%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3 class="skill-category-title">Base de donn√©es</h3>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span class="skill-name">PostgreSQL</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 70%"></div>
                            </div>
                            <span class="skill-level">70%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">MongoDB</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 65%"></div>
                            </div>
                            <span class="skill-level">65%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">SQLite</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 75%"></div>
                            </div>
                            <span class="skill-level">75%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3 class="skill-category-title">Outils & Autres</h3>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span class="skill-name">Git</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 85%"></div>
                            </div>
                            <span class="skill-level">85%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">Docker</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 60%"></div>
                            </div>
                            <span class="skill-level">60%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">Figma</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 70%"></div>
                            </div>
                            <span class="skill-level">70%</span>
                        </div>
                        <div class="skill-item">
                            <span class="skill-name">VS Code</span>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 90%"></div>
                            </div>
                            <span class="skill-level">90%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">Contact</h2>
            <div class="form-row">
                <label for="name">Nom</label>
                <input id="name" name="name" type="text" required placeholder="Votre nom" />
            </div>
            <div class="form-row">
                <label for="email">Email</label>
                <input id="email" name="email" type="email" required placeholder="vous@example.com" />
            </div>
            <div class="form-row">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="4" required placeholder="Votre message..."></textarea>
            </div>
            <button class="btn btn-primary" type="submit">Envoyer</button>
            </form>
        </div>
        <!-- Footer int√©gr√© √† la page Contact pour qu'il s'affiche en bas de cette page -->
        <footer class="site-footer">
            <div class="container footer-inner">
                <p>¬© <span id="year"></span> Portfolio de NeckTeck ‚Äî Tous droits r√©serv√©s</p>
                <div class="socials">
                    <a href="#" aria-label="GitHub">GitHub</a>
                    <a href="#" aria-label="LinkedIn">LinkedIn</a>
                    <a href="#" aria-label="Email">Email</a>
                </div>
            </div>
        </footer>
    </section>

    <!-- Chatbot Interface -->
    <div id="chatbot" class="chatbot-container" style="display: none;">
        <div class="chatbot-header">
            <h3>NeckBot - Assistant IA</h3>
            <button onclick="closeChatbot()" class="close-btn">√ó</button>
        </div>
        <div id="chat-messages" class="chat-messages">
            <div class="message bot-message">
                <p>Bonjour ! Je suis NeckBot, l'IA √† votre service. Je suis l√† pour r√©pondre √† toutes vos questions
                    concernant
                    NeckTeck, ses comp√©tences, ses projets ou sa candidature. Comment puis-je vous aider aujourd'hui ?
                </p>
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Demandez-moi quoi que ce soit..."
                onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()" class="send-btn">Envoyer</button>
        </div>
    </div>

    <script>
        // Mobile nav
        const toggle = document.querySelector('.nav-toggle');
        const nav = document.querySelector('.nav');
        toggle?.addEventListener('click', () => {
            const isOpen = nav?.classList.toggle('open');
            toggle.setAttribute('aria-expanded', String(!!isOpen));
        });

        // Year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Theme handling
        const htmlEl = document.documentElement;
        const btn = document.getElementById('themeToggle');

        function systemPrefersLight() {
            return window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        }

        function applyTheme(theme) {
            if (theme === 'light') {
                // D'abord, mettre le fond sombre et pr√©parer la transition sur l'√©l√©ment html
                htmlEl.classList.add('theme-transition');

                // Forcer le reflow pour que la transition soit visible
                htmlEl.offsetHeight;

                // Appliquer le th√®me clair
                htmlEl.setAttribute('data-theme', 'light');

                // Activer la transition vers le blanc
                setTimeout(() => {
                    htmlEl.classList.add('active');
                }, 50);

                // Nettoyer apr√®s la transition
                setTimeout(() => {
                    htmlEl.classList.remove('theme-transition', 'active');
                }, 2200);

                if (btn) btn.textContent = '‚òæ';
            } else {
                // Pour le th√®me sombre, transition douce
                htmlEl.classList.remove('theme-transition', 'active');
                htmlEl.style.transition = 'background-color 2s ease-in-out, color 1.5s ease-in-out, border-color 1.5s ease-in-out, box-shadow 1.5s ease-in-out';
                htmlEl.removeAttribute('data-theme');
                if (btn) btn.textContent = '‚òº';

                setTimeout(() => {
                    htmlEl.style.transition = '';
                }, 2000);
            }
        }

        // Initialize theme from localStorage (default: dark, ignoring system)
        (function initTheme() {
            const saved = localStorage.getItem('theme');
            const theme = saved || 'dark';
            applyTheme(theme);
        })();

        // Do not auto-switch theme on system changes when no choice is saved
        // (disabled listener to keep default dark unless user toggles explicitly)

        // Toggle on click
        btn?.addEventListener('click', () => {
            const isLight = htmlEl.getAttribute('data-theme') === 'light';
            const next = isLight ? 'dark' : 'light';
            localStorage.setItem('theme', next);
            applyTheme(next);
        });

        // Active nav link by section on scroll and click
        const navLinks = Array.from(document.querySelectorAll('.nav a[href^="#"]'));
        const sections = navLinks
            .map(a => document.querySelector(a.getAttribute('href')))
            .filter(Boolean);

        function setActiveById(id) {
            navLinks.forEach(a => {
                if (a.getAttribute('href') === '#' + id) {
                    a.classList.add('active');
                } else {
                    a.classList.remove('active');
                }
            });
        }

        // Observe sections to update active link when a section is centered in viewport
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setActiveById(entry.target.id);
                }
            });
        }, { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.6 });

        sections.forEach(sec => observer.observe(sec));

        // Smooth scroll on click and update active immediately
        navLinks.forEach(a => {
            a.addEventListener('click', (e) => {
                const hash = a.getAttribute('href');
                if (hash && hash.startsWith('#')) {
                    const target = document.querySelector(hash);
                    if (target) {
                        e.preventDefault();
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        setActiveById(target.id);
                        // Close mobile nav if open
                        nav?.classList.remove('open');
                        toggle?.setAttribute('aria-expanded', 'false');
                    }
                }
            });
        });

        // Initialize active state on load based on hash, if present
        if (location.hash) {
            const initial = document.querySelector(location.hash);
            if (initial) { setActiveById(initial.id); }
        }

        // ----- Thumbnails capture for light/dark themes -----
        async function wait(ms) { return new Promise(r => setTimeout(r, ms)); }

        async function captureTheme(theme) {
            // switch theme without persisting (temporary)
            const prev = htmlEl.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
            if (theme === 'light') htmlEl.setAttribute('data-theme', 'light');
            else htmlEl.removeAttribute('data-theme');
            await wait(150); // let layout/paint settle
            const canvas = await html2canvas(document.body, { useCORS: true, backgroundColor: null });
            // scale down to thumbnail size (aspect ~ 16:9)
            const targetW = 300, targetH = 170;
            const out = document.createElement('canvas');
            out.width = targetW; out.height = targetH;
            const ctx = out.getContext('2d');
            // cover strategy
            const sW = canvas.width; const sH = canvas.height;
            const scale = Math.max(targetW / sW, targetH / sH);
            const dW = sW * scale; const dH = sH * scale;
            const dx = (targetW - dW) / 2; const dy = (targetH - dH) / 2;
            ctx.drawImage(canvas, 0, 0, sW, sH, dx, dy, dW, dH);
            // restore previous theme
            if (prev === 'light') htmlEl.setAttribute('data-theme', 'light');
            else htmlEl.removeAttribute('data-theme');
            return out.toDataURL('image/png');
        }

        async function generateThumbnails() {
            const imgLight = document.getElementById('thumb-light');
            const imgDark = document.getElementById('thumb-dark');
            if (!imgLight || !imgDark || !window.html2canvas) return;
            imgLight.alt = 'Miniature th√®me clair';
            imgDark.alt = 'Miniature th√®me sombre';
            imgLight.src = await captureTheme('light');
            imgDark.src = await captureTheme('dark');
        }

        // Shortcut: Ctrl+Shift+S to refresh thumbnails
        window.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key.toLowerCase() === 's') {
                e.preventDefault();
                generateThumbnails();
            }
        });

        // Effets sonores pour le chatbot
        function playSound(frequency, duration, type = 'sine', volume = 0.1) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                oscillator.type = type;

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (error) {
                // Silencer les erreurs si l'API Web Audio n'est pas support√©e
                console.log('Web Audio API non support√©e');
            }
        }

        function playOpenSound() {
            // Son d'ouverture: m√©lodie montante
            playSound(440, 0.1, 'sine', 0.05); // A
            setTimeout(() => playSound(554, 0.1, 'sine', 0.05), 50); // C#
            setTimeout(() => playSound(659, 0.15, 'sine', 0.05), 100); // E
        }

        function playCloseSound() {
            // Son de fermeture: m√©lodie descendante
            playSound(659, 0.1, 'sine', 0.05); // E
            setTimeout(() => playSound(554, 0.1, 'sine', 0.05), 50); // C#
            setTimeout(() => playSound(440, 0.15, 'sine', 0.05), 100); // A
        }

        function playMessageSound() {
            // Son pour l'envoi/r√©ception de message
            playSound(800, 0.05, 'triangle', 0.03);
        }

        // Chatbot functionality
        function openChatbot() {
            const chatbot = document.getElementById('chatbot');
            chatbot.style.display = 'block';

            // Jouer le son d'ouverture
            playOpenSound();

            // Ajouter la classe d'animation d'ouverture
            chatbot.classList.remove('closing');
            chatbot.classList.add('opening');

            // Focus sur l'input apr√®s l'animation
            setTimeout(() => {
                document.getElementById('user-input').focus();

                // S'assurer que le dernier message est visible avec d√©filement fluide
                const messagesContainer = document.getElementById('chat-messages');
                smoothScrollToBottom(messagesContainer);

                // Retirer la classe d'ouverture apr√®s l'animation
                setTimeout(() => {
                    chatbot.classList.remove('opening');
                }, 500);
            }, 300);
        }

        function closeChatbot() {
            const chatbot = document.getElementById('chatbot');

            // Jouer le son de fermeture
            playCloseSound();

            // Ajouter la classe d'animation de fermeture
            chatbot.classList.remove('opening');
            chatbot.classList.add('closing');

            // Cacher le chatbot apr√®s l'animation
            setTimeout(() => {
                chatbot.style.display = 'none';
                chatbot.classList.remove('closing');
            }, 400);
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();

            if (message === '') return;

            // Jouer le son d'envoi de message
            playMessageSound();

            // Add user message
            addMessage(message, 'user-message');
            input.value = '';

            // Get bot response from AI
            try {
                // D√©marrer l'indicateur de frape imm√©diatement
                showTypingIndicator();

                // Lancer la requ√™te API en parall√®le
                const responsePromise = generateBotResponse(message);

                // Attendre au moins 300ms pour l'indicateur (effet visuel)
                await new Promise(resolve => setTimeout(resolve, 300));

                // R√©cup√©rer la r√©ponse
                const response = await responsePromise;

                // Masquer l'indicateur et ajouter la r√©ponse
                hideTypingIndicator();

                // Jouer un son de r√©ponse
                playMessageSound();

                addMessage(response, 'bot-message');
            } catch (error) {
                console.error('Error getting bot response:', error);
                hideTypingIndicator();
                addMessage('D√©sol√©, une erreur est survenue. Veuillez r√©essayer.', 'bot-message');
            }
        }

        async function addMessage(text, className) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${className}`;

            // Cr√©er le paragraphe pour l'effet de frappe
            const paragraph = document.createElement('p');
            messageDiv.appendChild(paragraph);
            messagesContainer.appendChild(messageDiv);

            // Effet de frappe progressive
            await chatbotTypeWriter(paragraph, text, className);

            // D√©filement fluide apr√®s la frappe
            smoothScrollToBottom(messagesContainer);
        }

        // Effet de frappe progressive
        async function chatbotTypeWriter(element, text, className) {
            const words = text.split(' ');
            let currentText = '';

            // Ajouter une classe pour le curseur de frappe
            element.classList.add('typing-cursor');

            for (let i = 0; i < words.length; i++) {
                currentText += (i > 0 ? ' ' : '') + words[i];
                element.textContent = currentText;

                // D√©filement progressif pendant la frappe
                const messagesContainer = document.getElementById('chat-messages');
                if (i % 2 === 0 || i === words.length - 1) { // Faire d√©filer tous les 2 mots ou √† la fin (acc√©l√©r√©)
                    smoothScrollToBottom(messagesContainer);
                }

                // Vitesse de frappe acc√©l√©r√©e pour les r√©ponses courtes
                const delay = className === 'bot-message' ?
                    Math.random() * 20 + 10 : // 10-30ms pour le bot (acc√©l√©r√©)
                    Math.random() * 20 + 10;   // 10-30ms pour l'utilisateur

                await new Promise(resolve => setTimeout(resolve, delay));
            }

            // Retirer le curseur de frappe √† la fin
            element.classList.add('typing-complete');
        }

        // D√©filement fluide et progressif
        function smoothScrollToBottom(container) {
            const start = container.scrollTop;
            const end = container.scrollHeight - container.clientHeight;
            const duration = 150; // ms (acc√©l√©r√©)
            const startTime = performance.now();

            function animateScroll(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Fonction d'acc√©l√©ration pour un effet naturel
                const easeInOutQuad = progress < 0.5
                    ? 2 * progress * progress
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                container.scrollTop = start + (end - start) * easeInOutQuad;

                if (progress < 1) {
                    requestAnimationFrame(animateScroll);
                }
            }

            requestAnimationFrame(animateScroll);
        }

        async function generateBotResponse(userMessage) {
            try {
                // Configuration de l'API Google Gemini
                const API_KEY = 'AIzaSyDj5qAn4i7k3y9NdALFGJWzztsl91TkvY8'; // Cl√© API Google Gemini
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`;

                // System prompt pour des r√©ponses COURTES et SIMPLES
                const systemPrompt = `Tu es l'assistant IA personnel de NeckTeck, candidat √† la formation Alegria.

R√àGLES :
1. R√©ponses TR√àS COURTES : 1-2 phrases maximum
2. Langage SIMPLE et direct
3. Sois amical mais professionnel
4. Un emoji MAX par r√©ponse

SUJETS :
- Parle de NeckTeck √† la 3√®me personne
- Comp√©tences : HTML5, CSS3, JavaScript, TypeScript
- Projets : Portfolio, dashboard analytics
- Motivation pour Alegria et le low-code
- Contact : via le portfolio

EXEMPLES :
"Bonjour ! üëã Je suis l'assistant de NeckTeck. Il est d√©veloppeur web passionn√© par Alegria !"
"NeckTeck ma√Ætrise HTML5, CSS3, JavaScript et TypeScript. Cr√©e des sites modernes et responsives."
"Il veut int√©grer Alegria pour devenir expert en low-code et cr√©er des solutions innovantes."`;

                // Pr√©parer la requ√™te pour l'API (format corrig√©)
                const requestBody = {
                    contents: [{
                        role: "user",
                        parts: [{
                            text: `${systemPrompt}\n\nQuestion de l'utilisateur: ${userMessage}`
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.7,
                        topP: 0.9,
                        topK: 40,
                        maxOutputTokens: 150, // R√©duit pour des r√©ponses courtes
                    },
                    safetySettings: [
                        {
                            category: "HARM_CATEGORY_HARASSMENT",
                            threshold: "BLOCK_NONE"
                        },
                        {
                            category: "HARM_CATEGORY_HATE_SPEECH",
                            threshold: "BLOCK_NONE"
                        },
                        {
                            category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                            threshold: "BLOCK_NONE"
                        },
                        {
                            category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                            threshold: "BLOCK_NONE"
                        }
                    ]
                };

                // Appel √† l'API Google Gemini
                console.log('Envoi √† l\'API Gemini:', requestBody);
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody)
                });

                console.log('Statut de la r√©ponse:', response.status);

                if (!response.ok) {
                    const errorData = await response.text();
                    console.error('Erreur API r√©ponse:', response.status, errorData);
                    throw new Error(`Erreur API: ${response.status} - ${errorData}`);
                }

                const data = await response.json();
                console.log('R√©ponse API:', data);

                // Extraire la r√©ponse de l'IA (gestion robuste)
                if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0]) {
                    const botResponse = data.candidates[0].content.parts[0].text;
                    return botResponse;
                } else {
                    throw new Error('Format de r√©ponse API inattendu');
                }

            } catch (error) {
                console.error('Erreur avec l\'API Gemini:', error);

                // R√©ponse de secours en cas d'erreur
                return 'D√©sol√©, je rencontre une difficult√© technique pour vous r√©pondre. Je suis l\'assistant IA personnel de NeckTeck, et je serais ravi de vous parler de ses comp√©tences, ses projets ou de sa candidature √† la formation Alegria. Veuillez r√©essayer dans quelques instants ou contactez directement NeckTeck via le formulaire en bas de page.';
            }
        }

        // Fonctions pour g√©rer l'indicateur de chargement
        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message bot-message typing';
            typingDiv.innerHTML = `
        <div class="typing-content">
          <span class="typing-dot"></span>
          <span class="typing-dot"></span>
          <span class="typing-dot"></span>
          <span class="typing-text">√©crit...</span>
        </div>
      `;
            messagesContainer.appendChild(typingDiv);

            // D√©filement fluide vers l'indicateur
            smoothScrollToBottom(messagesContainer);
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Removed auto-generation on load to avoid theme flicker

        // ===== CARROUSEL VERTICAL D√âSACTIV√â =====
        // Ce code a √©t√© d√©sactiv√© pour permettre un d√©filement naturel
        /*
        let currentSectionIndex = 0;
        const carouselIds = ['hero', 'vision-motivation', 'projects', 'contact'];
        let lastScrollTime = 0;
    
        // Fonction pour aller √† une section (sans bloquer le scroll)
        function goToSection(index) {
          if (index < 0 || index >= carouselIds.length) return;
        // ...
    
          const section = document.getElementById(carouselIds[index]);
          if (section) {
            currentSectionIndex = index;
            // Utiliser le scroll natif avec snap
            section.scrollIntoView({
              behavior: 'auto',
              block: 'start'
            console.log('üéØ Navigation vers:', carouselIds[index]);
          }
        }
    
        /*
        // D√©tecter les mouvements importants et aider le scroll-snap
        // COMMENT√â - Ce code interf√®re avec le scroll fluide de la molette
        // window.addEventListener('wheel', (e) => {
        //   const currentTime = Date.now();
    
        //   // Ne r√©agir qu'aux mouvements significatifs avec un d√©lai √©quilibr√©
        //   if (Math.abs(e.deltaY) > 10 && currentTime - lastScrollTime > 150) {
        //     const scrollDirection = e.deltaY > 0 ? 1 : -1;
    
        //     if (scrollDirection === 1 && currentSectionIndex < carouselIds.length - 1) {
        //       goToSection(currentSectionIndex + 1);
        //       lastScrollTime = currentTime;
        //     } else if (scrollDirection === -1 && currentSectionIndex > 0) {
        //       goToSection(currentSectionIndex - 1);
        //       lastScrollTime = currentTime;
        //     }
        //   }
        // }, { passive: true });
    
          // Trouver la section la plus proche
          let closestIndex = 0;
          let closestDistance = Infinity;
    
          sections.forEach((section, index) => {
            if (section) {
              const distance = Math.abs(scrollPosition - (section.offsetTop - 70));
              if (distance < closestDistance) {
                closestDistance = distance;
                closestIndex = index;
              }
            }
          });
    
          currentSectionIndex = closestIndex;
        }, { passive: true });
    
        console.log('üéØ Carrousel am√©lior√© activ√© - Aide le CSS scroll-snap sans blocage');
        */
        console.log('üéØ Carrousel vertical d√©sactiv√© - D√©filement naturel activ√©');

        // ===== ANIMATIONS D'APPARITION PROGRESSIVE AU SCROLL =====
        const animationObserverOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const animationObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Ajouter la classe visible quand l'√©l√©ment entre dans le viewport
                    entry.target.classList.add('visible');

                    // Animer les √©l√©ments enfants avec des effets sp√©ciaux pour la section projets
                    const title = entry.target.querySelector('h1, h2, h3, .section-title');
                    const paragraphs = entry.target.querySelectorAll('p, .text-content');
                    const cards = entry.target.querySelectorAll('.project');
                    const buttons = entry.target.querySelectorAll('.btn');

                    // Animation du titre
                    if (title) {
                        setTimeout(() => {
                            title.classList.add('visible');
                            // Effet sp√©cial pour le titre de section projets
                            if (entry.target.id === 'projects') {
                                title.style.transform = 'scale(1.05)';
                                setTimeout(() => {
                                    title.style.transform = 'scale(1)';
                                }, 300);
                            }
                        }, 100);
                    }

                    // Animation des paragraphes
                    paragraphs.forEach((p, index) => {
                        setTimeout(() => {
                            p.classList.add('visible');
                            // Effet de vague pour les paragraphes
                            p.style.transform = 'translateY(-10px)';
                            setTimeout(() => {
                                p.style.transform = 'translateY(0)';
                            }, 200);
                        }, 200 + (index * 100));
                    });

                    // Animation sp√©ciale pour les cartes projets avec effet 3D
                    cards.forEach((card, index) => {
                        setTimeout(() => {
                            card.classList.add('visible');

                            // Effet d'arriv√©e spectaculaire pour les cartes projets
                            card.style.transform = 'perspective(1000px) rotateY(15deg) translateZ(50px)';
                            card.style.opacity = '0';

                            setTimeout(() => {
                                card.style.transition = 'all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                                card.style.transform = 'perspective(1000px) rotateY(0deg) translateZ(0px)';
                                card.style.opacity = '1';

                                // Effet de rebond subtil
                                setTimeout(() => {
                                    card.style.transform = 'perspective(1000px) rotateY(-2deg) translateZ(10px)';
                                    setTimeout(() => {
                                        card.style.transform = 'perspective(1000px) rotateY(0deg) translateZ(0px)';
                                    }, 150);
                                }, 800);

                                // Effet de brillance pour les cartes sp√©ciales
                                if (card.classList.contains('vitrine')) {
                                    card.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.3)';
                                    setTimeout(() => {
                                        card.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.2)';
                                    }, 1000);
                                }
                            }, 50);
                        }, 300 + (index * 200)); // D√©lai augment√© pour un effet plus spectaculaire
                    });

                    // Animation des boutons avec effet d'√©lasticit√©
                    buttons.forEach((btn, index) => {
                        setTimeout(() => {
                            btn.classList.add('visible');
                            btn.style.transform = 'scale(0)';
                            setTimeout(() => {
                                btn.style.transition = 'all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                                btn.style.transform = 'scale(1)';

                                // Effet de pulsation
                                setTimeout(() => {
                                    btn.style.transform = 'scale(1.05)';
                                    setTimeout(() => {
                                        btn.style.transform = 'scale(1)';
                                    }, 200);
                                }, 600);
                            }, 100);
                        }, 600 + (index * 150));
                    });
                } else {
                    // Retirer la classe visible quand l'√©l√©ment sort du viewport
                    entry.target.classList.remove('visible');

                    // Retirer aussi les classes des √©l√©ments enfants
                    const title = entry.target.querySelector('h1, h2, h3, .section-title');
                    const paragraphs = entry.target.querySelectorAll('p, .text-content');
                    const cards = entry.target.querySelectorAll('.project');
                    const buttons = entry.target.querySelectorAll('.btn');

                    if (title) {
                        title.classList.remove('visible');
                    }

                    paragraphs.forEach(p => {
                        p.classList.remove('visible');
                    });

                    cards.forEach(card => {
                        card.classList.remove('visible');
                    });

                    buttons.forEach(btn => {
                        btn.classList.remove('visible');
                    });
                }
            });
        }, animationObserverOptions);

        // Observer toutes les sections pour les animations
        const animatedSections = document.querySelectorAll('.hero, .section');

        // Petit d√©lai pour s'assurer que le DOM est compl√®tement charg√©
        setTimeout(() => {
            animatedSections.forEach(section => {
                animationObserver.observe(section);
            });
        }, 100);

        // La premi√®re section (hero) sera anim√©e au chargement via l'observer
        // Pas besoin d'ajouter la classe visible manuellement

        console.log('‚ú® Animations d apparition progressive activ√©es');

        // ===== ANIMATIONS DE SCROLL HIGH-TECH =====
        let isScrolling = false;
        let scrollTimeout;
        let particleCount = 0;
        const maxParticles = 30;
        let scrollEventCount = 0;

        // Effet de motion blur pendant le scroll
        window.addEventListener('scroll', () => {
            scrollEventCount++;

            if (!isScrolling) {
                document.body.classList.add('scrolling');
                isScrolling = true;
                console.log('üöÄ Scroll commenc√© - Effets high-tech activ√©s');
            }

            // Cr√©er des particules de scroll high-tech plus fr√©quemment
            if (particleCount < maxParticles && Math.random() > 0.4) {
                createScrollParticle();
            }

            // R√©initialiser le timeout
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                document.body.classList.remove('scrolling');
                isScrolling = false;
                console.log(`‚ú® Scroll termin√© - ${scrollEventCount} √©v√©nements trait√©s`);
                scrollEventCount = 0;
            }, 200);
        }, { passive: true });

        // Fonction pour cr√©er des particules de scroll
        function createScrollParticle() {
            const particle = document.createElement('div');
            particle.className = 'scroll-particle';

            // Position al√©atoire sur le c√¥t√© droit de l'√©cran
            const x = window.innerWidth - 30 + Math.random() * 20;
            const y = Math.random() * window.innerHeight;

            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.animation = 'scrollParticle 1.2s ease-out forwards';

            document.body.appendChild(particle);
            particleCount++;

            console.log(`‚ú® Particule cr√©√©e - Total: ${particleCount}`);

            // Supprimer la particule apr√®s l'animation
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                    particleCount--;
                    console.log(`üóëÔ∏è Particule supprim√©e - Restant: ${particleCount}`);
                }
            }, 1200);
        }

        // Effet de parallaxe pour les sections
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.hero, .section');

            parallaxElements.forEach(element => {
                const speed = 0.5;
                const yPos = -(scrolled * speed);
                element.style.transform = `translateY(${yPos}px)`;
            });
        }, { passive: true });

        console.log('üöÄ Animations de scroll high-tech activ√©es');

        // ===== SCROLL LISS√â SIMPLE =====
        // Utilisation du scroll natif avec CSS seulement pour √©viter les blocages
        console.log('‚úÖ Scroll natif avec animations CSS activ√©');

        // ===== VRAIE MUSIQUE D'AMBIANCE =====
        const backgroundMusic = document.getElementById('background-music');
        const transitionSound = document.getElementById('transition-sound');
        const scrollSound = document.getElementById('scroll-sound');
        const animationSound = document.getElementById('animation-sound');
        const musicToggle = document.getElementById('musicToggle');
        let isMusicPlaying = false;
        let userInteracted = false;
        let soundEnabled = true;

        // V√©rifier que les √©l√©ments audio sont bien charg√©s
        console.log('üîç V√©rification des √©l√©ments audio :');
        console.log('  - backgroundMusic:', backgroundMusic ? '‚úÖ OK' : '‚ùå Manquant');
        console.log('  - transitionSound:', transitionSound ? '‚úÖ OK' : '‚ùå Manquant');
        console.log('  - scrollSound:', scrollSound ? '‚úÖ OK' : '‚ùå Manquant');
        console.log('  - animationSound:', animationSound ? '‚úÖ OK' : '‚ùå Manquant');
        console.log('  - musicToggle:', musicToggle ? '‚úÖ OK' : '‚ùå Manquant');

        // Configurer le volume pour une ambiance ultra discr√®te
        backgroundMusic.volume = 0.03; // Musique d'ambiance plus discr√®te
        transitionSound.volume = 0.04;
        scrollSound.volume = 0.02;
        // Note: animationSound volume n'est plus utilis√© - Web Audio API g√®re le volume directement

        // D√©marrer la musique
        function startMusic() {
            // Ne pas d√©marrer si la musique est d√©j√† en train de jouer
            if (isMusicPlaying) {
                console.log('üéµ Musique d√©j√† en cours');
                return;
            }

            console.log('üéµ Tentative de d√©marrage de la musique...');
            backgroundMusic.play().then(() => {
                isMusicPlaying = true;
                musicToggle.classList.add('playing');
                musicToggle.innerHTML = '<span class="music-icon">üéµ</span>';
                console.log('üéµ Vraie musique d√©marr√©e');
            }).catch(error => {
                console.log('‚ùå Erreur d√©marrage musique:', error);
            });
        }

        // Toggle la musique
        function toggleMusic() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                isMusicPlaying = false;
                soundEnabled = false;
                musicToggle.classList.remove('playing');
                musicToggle.innerHTML = '<span class="music-icon">üîá</span>';
                console.log('‚è∏Ô∏è Musique mise en pause');
            } else {
                startMusic();
            }
        }

        // Jouer un son de transition
        function playTransitionSound() {
            if (soundEnabled && userInteracted) {
                transitionSound.currentTime = 0;
                transitionSound.play().catch(error => {
                    console.log('Erreur son de transition:', error);
                });
            }
        }

        // Jouer un son de scroll
        function playScrollSound() {
            if (soundEnabled && userInteracted) {
                scrollSound.currentTime = 0;
                scrollSound.play().catch(error => {
                    console.log('Erreur son de scroll:', error);
                });
            }
        }

        // √âcouteur d'√©v√©nement pour le bouton de musique
        musicToggle.addEventListener('click', toggleMusic);

        // Initialiser le contexte audio d√®s la premi√®re interaction
        function initAudioContext() {
            if (!window.audioContext) {
                try {
                    window.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    console.log('üéµ Contexte audio initialis√©');

                    // Cr√©er un oscillateur silencieux pour "d√©bloquer" l'audio
                    const oscillator = window.audioContext.createOscillator();
                    const gainNode = window.audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(window.audioContext.destination);

                    gainNode.gain.setValueAtTime(0, window.audioContext.currentTime);
                    oscillator.start();
                    oscillator.stop(window.audioContext.currentTime + 0.001);

                    console.log('üîì Contexte audio d√©bloqu√©');
                } catch (error) {
                    console.log('‚ùå Erreur lors de l\'initialisation du contexte audio:', error);
                }
            }
        }

        // D√©marrer la musique au premier clic utilisateur n'importe o√π sur la page
        document.addEventListener('click', function startMusicOnFirstClick() {
            if (!userInteracted) {
                // Marquer l'interaction utilisateur imm√©diatement pour permettre les sons
                userInteracted = true;
                console.log('üë§ Premi√®re interaction utilisateur d√©tect√©e - sons activ√©s');

                // Initialiser le contexte audio imm√©diatement
                initAudioContext();

                // Tenter de d√©marrer la musique en arri√®re-plan
                startMusic();

                // Supprimer l'√©couteur apr√®s la premi√®re interaction
                document.removeEventListener('click', startMusicOnFirstClick);
            }
        }, { once: true });
        // Ajouter l'√©couteur pour la molette de la souris (wheel)
        document.addEventListener('wheel', function startMusicOnFirstWheel() {
            if (!userInteracted) {
                // Marquer l'interaction utilisateur imm√©diatement pour permettre les sons
                userInteracted = true;
                console.log('üë§ Premi√®re interaction utilisateur d√©tect√©e (wheel) - TOUS les sons activ√©s (frappe + navigation)');

                // Initialiser le contexte audio imm√©diatement
                initAudioContext();

                // Tenter de d√©marrer la musique en arri√®re-plan
                startMusic();

                // Supprimer l'√©couteur apr√®s la premi√®re interaction
                document.removeEventListener('wheel', startMusicOnFirstWheel);
            }
        }, { once: true });

        // D√©marrer la musique au premier scroll
        document.addEventListener('scroll', function startMusicOnFirstScroll() {
            if (!userInteracted) {
                // Marquer l'interaction utilisateur imm√©diatement pour permettre les sons
                userInteracted = true;
                console.log('üë§ Premi√®re interaction utilisateur d√©tect√©e (scroll) - TOUS les sons activ√©s (frappe + navigation)');

                // Initialiser le contexte audio imm√©diatement
                initAudioContext();

                // Tenter de d√©marrer la musique en arri√®re-plan
                startMusic();

                // Supprimer l'√©couteur apr√®s la premi√®re interaction
                document.removeEventListener('scroll', startMusicOnFirstScroll);
            }
        }, { once: true });


        // Fonction pour activer l'audio manuellement
        function activateAudio() {
            console.log('üë§ Activation audio manuelle');

            // Forcer l'interaction utilisateur
            userInteracted = true;

            // Cr√©er un contexte audio si n√©cessaire
            if (!typingAudioContext) {
                typingAudioContext = new (window.AudioContext || window.webkitAudioContext)();
            }

            // R√©activer le contexte audio si suspendu
            if (typingAudioContext.state === 'suspended') {
                typingAudioContext.resume().then(() => {
                    console.log('‚úÖ Contexte audio r√©activ√©');
                }).catch(err => {
                    console.log('‚ùå Erreur r√©activation contexte:', err);
                });
            }

            // Initialiser le contexte audio principal
            initAudioContext();

            // D√©marrer la musique
            startMusic();

            // Cacher le bouton d'activation
            const activationDiv = document.getElementById('audio-activation');
            if (activationDiv) {
                activationDiv.style.display = 'none';
            }

            console.log('‚úÖ Audio activ√© avec succ√®s !');
        }

        // Variable pour suivre le son d'animation en cours
        let currentAnimationSound = null;

        // Protection contre les d√©clenchements multiples
        let lastSoundTriggerTime = 0;
        const MIN_TRIGGER_INTERVAL = 500; // 500ms minimum entre les d√©clenchements

        // Jouer un son d'animation pour chaque section
        function playAnimationSound() {
            console.log('üîî Tentative de jouer son d\'animation - soundEnabled:', soundEnabled, 'userInteracted:', userInteracted);

            // V√©rifier l'intervalle minimum entre les d√©clenchements
            const now = Date.now();
            if (now - lastSoundTriggerTime < MIN_TRIGGER_INTERVAL) {
                console.log('‚è±Ô∏è D√©clenchement trop rapide - ignor√©');
                return;
            }

            if (soundEnabled && userInteracted) {
                // Annuler le son pr√©c√©dent s'il est en cours
                if (currentAnimationSound) {
                    currentAnimationSound.pause();
                    currentAnimationSound.currentTime = 0;
                    console.log('‚èπÔ∏è Son pr√©c√©dent annul√©');
                }

                // G√©n√©rer un son de bulle d'eau futuriste avec Web Audio API
                console.log('üéµ G√©n√©ration du son de bulle d\'eau futuriste');

                // Enregistrer le temps de d√©clenchement
                lastSoundTriggerTime = now;

                try {
                    // Cr√©er le contexte audio
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

                    // Cr√©er plusieurs oscillateurs pour un effet de bulle complexe
                    const mainOscillator = audioContext.createOscillator();
                    const bubbleOscillator = audioContext.createOscillator();
                    const shimmerOscillator = audioContext.createOscillator();

                    // Cr√©er des noeuds de gain pour le contr√¥le du volume
                    const mainGain = audioContext.createGain();
                    const bubbleGain = audioContext.createGain();
                    const shimmerGain = audioContext.createGain();

                    // Cr√©er un filtre pour l'effet bulle
                    const filter = audioContext.createBiquadFilter();
                    filter.type = 'bandpass';
                    filter.frequency.setValueAtTime(1200, audioContext.currentTime);
                    filter.Q.setValueAtTime(15, audioContext.currentTime);

                    // Configuration des oscillateurs
                    // Oscillateur principal - son de base
                    mainOscillator.type = 'sine';
                    mainOscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                    mainOscillator.frequency.exponentialRampToValueAtTime(880, audioContext.currentTime + 0.15);

                    // Oscillateur de bulle - effet de glissando
                    bubbleOscillator.type = 'triangle';
                    bubbleOscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    bubbleOscillator.frequency.exponentialRampToValueAtTime(1600, audioContext.currentTime + 0.08);
                    bubbleOscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.15);

                    // Oscillateur de scintillement - effet futuriste
                    shimmerOscillator.type = 'sine';
                    shimmerOscillator.frequency.setValueAtTime(2400, audioContext.currentTime);

                    // Configuration du volume
                    mainGain.gain.setValueAtTime(0, audioContext.currentTime);
                    mainGain.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.02);
                    mainGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

                    bubbleGain.gain.setValueAtTime(0, audioContext.currentTime);
                    bubbleGain.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.01);
                    bubbleGain.gain.exponentialRampToValueAtTime(0.005, audioContext.currentTime + 0.12);

                    shimmerGain.gain.setValueAtTime(0, audioContext.currentTime);
                    shimmerGain.gain.linearRampToValueAtTime(0.08, audioContext.currentTime + 0.03);
                    shimmerGain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);

                    // Connecter les noeuds
                    mainOscillator.connect(mainGain);
                    bubbleOscillator.connect(filter);
                    filter.connect(bubbleGain);
                    shimmerOscillator.connect(shimmerGain);

                    // Mixer tous les sons
                    mainGain.connect(audioContext.destination);
                    bubbleGain.connect(audioContext.destination);
                    shimmerGain.connect(audioContext.destination);

                    // Jouer les sons
                    mainOscillator.start();
                    bubbleOscillator.start();
                    shimmerOscillator.start();

                    // Arr√™ter les sons
                    mainOscillator.stop(audioContext.currentTime + 0.2);
                    bubbleOscillator.stop(audioContext.currentTime + 0.15);
                    shimmerOscillator.stop(audioContext.currentTime + 0.1);

                    console.log('‚úÖ Son de bulle d\'eau futuriste jou√© avec succ√®s !');

                    // Cr√©er un objet son simul√© pour la gestion
                    currentAnimationSound = {
                        pause: function () {
                            console.log('‚è∏Ô∏è Son simul√© arr√™t√©');
                        },
                        currentTime: 0
                    };

                    // Lib√©rer apr√®s un court d√©lai
                    setTimeout(() => {
                        currentAnimationSound = null;
                        console.log('üèÅ Son de bulle d\'eau futuriste termin√©');
                    }, 250);

                } catch (error) {
                    console.log('‚ùå Erreur avec Web Audio API:', error);
                    console.log('üí° Essayez de cliquer d\'abord sur la page pour d√©bloquer l\'audio');
                    currentAnimationSound = null;
                }
            } else {
                console.log('‚è∏Ô∏è Son bloqu√© - en attente d\'interaction utilisateur');
                currentAnimationSound = null;
            }
        }
        // Tester le son manuellement apr√®s interaction
        function testAnimationSound() {
            console.log('üß™ Test manuel du son d\'animation');

            // Forcer l\'interaction utilisateur pour le test
            userInteracted = true;

            playAnimationSound();
            console.log('‚úÖ Test son lanc√© !');
        }

        // Fonction de test complet pour l'audio
        function testAudioSystem() {
            console.log('üîß Test complet du syst√®me audio');
            console.log('================================');

            // V√©rifier les variables globales
            console.log('üìä Variables globales:');
            console.log('   soundEnabled:', soundEnabled);
            console.log('   userInteracted:', userInteracted);
            console.log('   MIN_TRIGGER_INTERVAL:', MIN_TRIGGER_INTERVAL);
            console.log('   lastSoundTriggerTime:', lastSoundTriggerTime);

            // V√©rifier le support Web Audio API
            console.log('üéµ Support Web Audio API:');
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (AudioContext) {
                console.log('   ‚úÖ Web Audio API support√©e');
                try {
                    const testContext = new AudioContext();
                    console.log('   ‚úÖ Contexte audio cr√©√© avec succ√®s');
                    console.log('   √âtat du contexte:', testContext.state);
                    testContext.close();
                } catch (error) {
                    console.log('   ‚ùå Erreur cr√©ation contexte:', error);
                }
            } else {
                console.log('   ‚ùå Web Audio API non support√©e');
            }

            // V√©rifier les √©l√©ments audio
            console.log('üéß √âl√©ments audio:');
            const backgroundMusic = document.getElementById('background-music');
            if (backgroundMusic) {
                console.log('   ‚úÖ Musique de fond trouv√©e');
                console.log('   Sources:', backgroundMusic.children.length);
                for (let i = 0; i < backgroundMusic.children.length; i++) {
                    console.log(`      Source ${i + 1}:`, backgroundMusic.children[i].src);
                }
            } else {
                console.log('   ‚ùå Musique de fond non trouv√©e');
            }

            const musicToggle = document.getElementById('music-toggle');
            if (musicToggle) {
                console.log('   ‚úÖ Bouton musique trouv√©');
            } else {
                console.log('   ‚ùå Bouton musique non trouv√©');
            }

            // Test du son d'animation
            console.log('üîä Test du son d\'animation:');
            userInteracted = true;
            soundEnabled = true;

            console.log('   üì¢ Lancement du test dans 1 seconde...');
            setTimeout(() => {
                playAnimationSound();
                console.log('   ‚úÖ Son d\'animation test√©');
            }, 1000);

            console.log('================================');
            console.log('üí° Utilisez testAnimationSound() pour tester √† nouveau');
            console.log('üí° Utilisez toggleMusic() pour tester la musique de fond');
        }

        // Fonction pour tester facilement des fichiers MP3
        function testMP3Sound(filePath) {
            console.log('üéµ Test du fichier MP3:', filePath);

            // Forcer l'interaction utilisateur pour le test
            userInteracted = true;

            // Sauvegarder la configuration actuelle
            const originalSource = 'webaudio';

            // Cr√©er un audio temporaire pour tester
            try {
                const audio = new Audio(filePath);
                audio.volume = 0.7;

                audio.play().then(() => {
                    console.log('‚úÖ Fichier MP3 jou√© avec succ√®s !');
                    console.log('üí° Pour utiliser ce son d√©finitivement, modifiez la ligne :');
                    console.log(`   const animationSoundSource = '${filePath}';`);
                }).catch(e => {
                    console.log('‚ùå Erreur de lecture:', e);
                    console.log('üí° V√©rifiez que le fichier existe au bon endroit');
                });

                // Arr√™ter le son apr√®s 3 secondes pour √©viter les boucles infinies
                setTimeout(() => {
                    audio.pause();
                    audio.currentTime = 0;
                    console.log('‚èπÔ∏è Test arr√™t√©');
                }, 3000);

            } catch (error) {
                console.log('‚ùå Erreur lors du test:', error);
            }
        }

        // Fonction pour lister les fichiers MP3 sugg√©r√©s
        function listMP3Suggestions() {
            console.log('üìÅ Suggestions de fichiers MP3 √† tester :');
            console.log('');
            console.log('üéµ Exemples de chemins :');
            console.log('   testMP3Sound("mon-son.mp3");');
            console.log('   testMP3Sound("sounds/transition.mp3");');
            console.log('   testMP3Sound("assets/click.mp3");');
            console.log('   testMP3Sound("./assets/son.mp3");');
            console.log('');
            console.log('üéÆ Comment tester :');
            console.log('   1. Ouvrez la console (F12)');
            console.log('   2. Tapez: testMP3Sound("votre-fichier.mp3")');
            console.log('   3. Appuyez sur Entr√©e');
            console.log('');
            console.log('‚öôÔ∏è Pour utiliser d√©finitivement :');
            console.log('   1. Trouvez la ligne: const animationSoundSource = \'webaudio\';');
            console.log('   2. Remplacez \'webaudio\' par votre chemin de fichier');
            console.log('   3. Rafra√Æchissez la page pour tester');
        }

        // Fonction pour tester toutes les variations de sons
        function testAllSoundVariations() {
            console.log('üéµ Test de toutes les variations de sons');

            // Forcer l\'interaction utilisateur pour le test
            userInteracted = true;

            const variations = [
                { name: 'Bleep futuriste', key: '1' },
                { name: 'Whoosh de transition', key: '2' },
                { name: 'Pop impactant', key: '3' },
                { name: 'Chime cristallin', key: '4' }
            ];

            console.log('üìã Variations disponibles :');
            variations.forEach(variation => {
                console.log(`   ${variation.key} - ${variation.name}`);
            });
            console.log('üí° Appuyez sur T pour tester la variation actuelle');
            console.log('üí° Changez la variation en modifiant la ligne : const soundVariation = X;');
        }

        // L'intervalle minimum pour les sons est maintenant g√©r√© par MIN_TRIGGER_INTERVAL

        // Fonction pour faire d√©filer vers une section avec effet de roulement ultra-fluide
        function scrollToSection(targetId) {
            const targetSection = document.querySelector(targetId);
            if (targetSection) {
                // Calcul de la position avec d√©calage pour le header fixe
                const headerHeight = 70; // Hauteur approximative du header
                const targetPosition = targetSection.offsetTop - headerHeight;
                const startPosition = window.pageYOffset;
                const distance = targetPosition - startPosition;

                // Dur√©e de l'animation proportionnelle √† la distance
                const duration = Math.min(Math.abs(distance) * 0.8, 1500); // max 1.5 secondes

                // Animation de roulement fluide
                let startTime = null;

                function animateScroll(currentTime) {
                    if (startTime === null) startTime = currentTime;
                    const timeElapsed = currentTime - startTime;
                    const progress = Math.min(timeElapsed / duration, 1);

                    // Courbe d'acc√©l√©ration/d√©c√©l√©ration pour un effet de roulement naturel
                    const easeInOutCubic = progress < 0.5
                        ? 4 * progress * progress * progress
                        : 1 - Math.pow(-2 * progress + 2, 3) / 2;

                    // Position actuelle avec l'effet de roulement
                    const currentPosition = startPosition + distance * easeInOutCubic;

                    window.scrollTo(0, currentPosition);

                    // Continuer l'animation jusqu'√† la fin
                    if (progress < 1) {
                        requestAnimationFrame(animateScroll);
                    } else {
                        console.log(`üéØ Navigation vers ${targetId} termin√©e - Distance: ${Math.abs(distance)}px`);
                    }
                }

                // D√©marrer l'animation de roulement
                requestAnimationFrame(animateScroll);
                console.log(`üéØ D√©marrage navigation vers ${targetId} - Distance: ${distance}px, Dur√©e: ${duration}ms`);

            } else {
                console.error(`‚ùå Section non trouv√©e: ${targetId}`);
            }
        }

        // Ajouter des sons d'animation et scroll fluide au clic sur les liens de navigation
        const menuNavLinks = document.querySelectorAll('.nav a[href^="#"]');

        menuNavLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                // Emp√™cher le comportement par d√©faut pour g√©rer nous-m√™mes le scroll

                const now = Date.now();
                const targetId = link.getAttribute('href');

                // Jouer le son si l'utilisateur a interagi ET si le d√©lai minimum est respect√©
                if (userInteracted && (now - lastSoundTriggerTime) >= MIN_TRIGGER_INTERVAL) {
                    console.log('üîî Son d√©clench√© par le clic sur le menu:', link.textContent);

                    // Jouer le son imm√©diatement au clic
                    playAnimationSound();
                } else if (!userInteracted) {
                    console.log('‚è∏Ô∏è Clic d√©tect√© mais en attente d\'interaction utilisateur pour le son');
                } else if ((now - lastSoundTriggerTime) < MIN_TRIGGER_INTERVAL) {
                    console.log('‚è±Ô∏è Son trop r√©cent - clic ignor√©');
                }

                // Lancer le scroll ultra-fluide vers la section cible
                scrollToSection(targetId);
            });
        });

        console.log('üéµ Sons d\'animation configur√©s pour les clics sur le menu de navigation');


        // Fonction pour v√©rifier que les liens de navigation sont bien d√©tect√©s
        function testMenuLinks() {
            const links = document.querySelectorAll('.nav a[href^="#"]');
            console.log('üîç Liens de navigation d√©tect√©s:', links.length);
            links.forEach((link, index) => {
                console.log(`   ${index + 1}. "${link.textContent}" -> ${link.getAttribute('href')}`);
            });
            return links;
        }

        // Tester la d√©tection des liens au chargement
        setTimeout(() => {
            const detectedLinks = testMenuLinks();
            if (detectedLinks.length === 0) {
                console.log('‚ö†Ô∏è Aucun lien de navigation d√©tect√© - v√©rifiez le s√©lecteur CSS');
            } else {
                console.log('‚úÖ Liens de navigation pr√™ts pour les sons');
            }
        }, 500);

        // Ajouter des raccourcis clavier pour tester les sons
        document.addEventListener('keydown', (event) => {
            if (event.key === 't' || event.key === 'T') {
                testAnimationSound();
            } else if (event.key === 'a' || event.key === 'A') {
                testAudioSystem();
            } else if (event.key === 'm' || event.key === 'M') {
                listMP3Suggestions();
            } else if (event.key === 'l' || event.key === 'L') {
                testMenuLinks();
            }
        });

        console.log('üéµ Syst√®me de son d\'animation pr√™t !');
        console.log('üéÆ Raccourcis clavier :');
        console.log('   T - Tester le son actuel');
        console.log('   A - Test complet du syst√®me audio');
        console.log('   M - Afficher les suggestions MP3');
        console.log('   L - V√©rifier les liens de navigation');
        console.log('üí° Pour tester vos fichiers MP3 : testMP3Sound("votre-fichier.mp3")');
        console.log('üí° Pour test complet : testAudioSystem()');

        // Note: Plus besoin de v√©rifier l'√©tat du son - Web Audio API fonctionne imm√©diatement

        // Son de scroll tr√®s subtil (limit√© pour ne pas √™tre intrusif)
        let lastSoundScrollTime = 0;
        window.addEventListener('scroll', () => {
            const now = Date.now();
            if (now - lastSoundScrollTime > 2000 && userInteracted) { // Limiter √† une fois toutes les 2 secondes
                playScrollSound();
                lastSoundScrollTime = now;
            }
        });

        // Sauvegarder l'√©tat de la musique dans localStorage
        function saveMusicState() {
            localStorage.setItem('musicPlaying', isMusicPlaying);
            localStorage.setItem('soundEnabled', soundEnabled);
        }

        // Initialiser le contexte audio (pour compatibilit√©)
        function initAudioContext() {
            // Cette fonction est un placeholder pour la compatibilit√©
            // Le contexte audio est initialis√© directement dans playAnimationSound()
            console.log('üéµ Contexte audio initialis√©');
        }

        // D√©marrer la musique de fond
        function startBackgroundMusic() {
            if (backgroundMusic && userInteracted) {
                backgroundMusic.play().then(() => {
                    isMusicPlaying = true;
                    console.log('üéµ Musique de fond d√©marr√©e');
                }).catch(error => {
                    console.log('‚ùå Erreur d√©marrage musique de fond:', error);
                });
            }
        }

        // Restaurer l'√©tat de la musique
        function restoreMusicState() {
            const savedPlaying = localStorage.getItem('musicPlaying') === 'true';
            const savedSoundEnabled = localStorage.getItem('soundEnabled') !== 'false';

            soundEnabled = savedSoundEnabled;

            if (savedPlaying && userInteracted) {
                initAudioContext();
                startBackgroundMusic();
                isMusicPlaying = true;
                soundEnabled = true;
                musicToggle.classList.add('playing');
                musicToggle.innerHTML = soundEnabled ? '<span class="music-icon">üîä</span>' : '<span class="music-icon">üîá</span>';
            }
        }

        // Sauvegarder l'√©tat quand la musique change
        window.addEventListener('beforeunload', saveMusicState);

        // Restaurer l'√©tat au chargement
        window.addEventListener('load', restoreMusicState);

        // Initialiser l'ic√¥ne
        musicToggle.innerHTML = '<span class="music-icon">üîä</span>';

        // ===== FONCTIONS DE TEST AM√âLIOR√âES =====

        // Obtenir le nom de la variation actuelle
        function getCurrentSoundVariation() {
            const variations = [
                { id: 1, name: 'Bleep futuriste' },
                { id: 2, name: 'Whoosh de transition' },
                { id: 3, name: 'Pop impactant' },
                { id: 4, name: 'Chime cristallin' },
                { id: 0, name: 'Version ultime (double oscillateur)' }
            ];

            // Trouver la ligne contenant soundVariation dans le code
            const scripts = document.querySelectorAll('script');
            let currentVariation = 1;

            for (let script of scripts) {
                const scriptContent = script.textContent;
                const match = scriptContent.match(/const soundVariation = (\d+);/);
                if (match) {
                    currentVariation = parseInt(match[1]);
                    break;
                }
            }

            const variation = variations.find(v => v.id === currentVariation) || variations[0];
            return `${variation.id} - ${variation.name}`;
        }

        // Tester une variation sp√©cifique
        function testVariation(variationNumber) {
            console.log(`üß™ Test de la variation ${variationNumber}`);

            // Forcer l'interaction utilisateur pour le test
            userInteracted = true;

            // Sauvegarder la variation actuelle
            const originalVariation = soundVariation;

            // Modifier temporairement la variable globale
            window.soundVariation = variationNumber;

            // Jouer le son avec la nouvelle variation
            playAnimationSound();

            // Restaurer la variation originale apr√®s un court d√©lai
            setTimeout(() => {
                window.soundVariation = originalVariation;
                console.log(`‚úÖ Variation ${variationNumber} test√©e !`);
                console.log('üí° Variation actuelle restaur√©e :', getCurrentSoundVariation());
            }, 1000);
        }

        // Mettre √† jour la fonction testAnimationSound pour afficher la variation
        function testAnimationSound() {
            console.log('üß™ Test manuel du son d\'animation');

            // Forcer l\'interaction utilisateur pour le test
            userInteracted = true;

            playAnimationSound();
            console.log('‚úÖ Test son lanc√© !');
            console.log('üéµ Variation actuelle :', getCurrentSoundVariation());
        }

        // Mettre √† jour la fonction testAllSoundVariations
        function testAllSoundVariations() {
            console.log('üéµ Test de toutes les variations de sons');

            // Forcer l\'interaction utilisateur pour le test
            userInteracted = true;

            const variations = [
                { id: 1, name: 'Bleep futuriste', key: '1' },
                { id: 2, name: 'Whoosh de transition', key: '2' },
                { id: 3, name: 'Pop impactant', key: '3' },
                { id: 4, name: 'Chime cristallin', key: '4' },
                { id: 0, name: 'Version ultime (double oscillateur)', key: '0' }
            ];

            console.log('üìã Variations disponibles :');
            variations.forEach(variation => {
                console.log(`   ${variation.key} - ${variation.name}`);
            });
            console.log('üí° Appuyez sur T pour tester la variation actuelle');
            console.log('üí° Changez la variation en modifiant la ligne : const soundVariation = X;');
            console.log('üí° Variation actuelle :', getCurrentSoundVariation());
            console.log('üí° Pour tester rapidement, tapez dans la console :');
            console.log('   testVariation(1)  // Bleep futuriste');
            console.log('   testVariation(2)  // Whoosh de transition');
            console.log('   testVariation(3)  // Pop impactant');
            console.log('   testVariation(4)  // Chime cristallin');
            console.log('   testVariation(0)  // Version ultime');
        }

        // Fonction pour tester la musique de fond
        function testBackgroundMusic() {
            console.log('üéµ Test de la musique de fond');

            // Forcer l'interaction utilisateur pour le test
            userInteracted = true;

            if (backgroundMusic) {
                console.log('üéµ √âtat actuel :', {
                    readyState: backgroundMusic.readyState,
                    paused: backgroundMusic.paused,
                    ended: backgroundMusic.ended,
                    currentTime: backgroundMusic.currentTime,
                    duration: backgroundMusic.duration
                });

                startMusic();
            } else {
                console.error('‚ùå √âl√©ment background-music non trouv√© !');
            }
        }

        // Afficher les informations sur les variations au chargement
        console.log('üéµ Syst√®me de sons avec variations pr√™t !');
        console.log('üéÆ Raccourcis clavier :');
        console.log('   T - Tester le son actuel');
        console.log('   B - Tester la musique de fond');
        console.log('   M - Afficher les suggestions MP3');
        console.log('   L - V√©rifier les liens de navigation');
        console.log('üí° Pour tester vos fichiers MP3 : testMP3Sound("votre-fichier.mp3")');
        console.log('üí° Pour tester les variations : testAllSoundVariations()');
        console.log('üí° Variation actuelle :', getCurrentSoundVariation());

        // √âcouteur pour les raccourcis clavier
        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'b') {
                testBackgroundMusic();
            }
        });

        // Animation des barres de progression des comp√©tences
        function animateSkillBars() {
            console.log('üéØ Animation des barres de progression des comp√©tences');

            const skillProgressBars = document.querySelectorAll('.skill-progress');

            skillProgressBars.forEach((bar, index) => {
                // R√©cup√©rer la largeur cible depuis le style inline
                const targetWidth = bar.style.width;

                if (targetWidth && targetWidth !== '0%') {
                    // Stocker la largeur cible dans une variable CSS
                    bar.style.setProperty('--target-width', targetWidth);

                    // R√©initialiser √† 0 pour l'animation
                    bar.style.width = '0%';

                    // Animer avec un d√©lai pour chaque barre
                    setTimeout(() => {
                        bar.style.width = targetWidth;
                        console.log(`üìä Barre ${index + 1} anim√©e √† ${targetWidth}`);
                    }, 100 + (index * 100)); // D√©lai progressif
                }
            });
        }

        // Lancer l'animation des comp√©tences quand la section est visible
        const skillsSection = document.getElementById('skills');
        if (skillsSection) {
            // Observer la section comp√©tences pour lancer l'animation quand elle devient visible
            const skillsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        console.log('üëÄ Section comp√©tences visible - lancement de l\'animation');
                        animateSkillBars();
                        skillsObserver.unobserve(entry.target); // Arr√™ter d'observer apr√®s l'animation
                    }
                });
            }, { threshold: 0.3 }); // Lancer l'animation quand 30% de la section est visible

            skillsObserver.observe(skillsSection);
            console.log('üéØ Observateur configur√© pour la section comp√©tences');
        } else {
            console.log('‚ùå Section comp√©tences non trouv√©e');
        }

        // Exporter les fonctions de son globalement pour compatibilit√©
        window.stopTypingSound = stopTypingSound;
        window.playTypingSound = playTypingSound;
        window.pauseTypingSound = pauseTypingSound;
        window.resumeTypingSound = resumeTypingSound;
        window.restartTypingSound = restartTypingSound;

        console.log('üîß Fonctions audio export√©es globalement');

        // Fonction de test pour les effets de survol des projets
        function testProjectHoverEffects() {
            console.log('üß™ Test des effets de survol des projets');

            const projects = document.querySelectorAll('.project[onclick]');
            console.log(`üìã Trouv√© ${projects.length} projets avec onclick`);

            projects.forEach((project, index) => {
                console.log(`üîç Projet ${index + 1}:`);
                console.log(`  - Classes: ${project.className}`);
                console.log(`  - Attribut onclick: ${project.getAttribute('onclick')}`);
                console.log(`  - Style computed transform: ${window.getComputedStyle(project).transform}`);
                console.log(`  - Style computed box-shadow: ${window.getComputedStyle(project).boxShadow}`);
                console.log(`  - Style computed transition: ${window.getComputedStyle(project).transition}`);
            });

            // V√©rifier les pseudo-√©l√©ments
            const firstProject = projects[0];
            if (firstProject) {
                const beforeStyle = window.getComputedStyle(firstProject, '::before');
                const afterStyle = window.getComputedStyle(firstProject, '::after');
                console.log('üé® Pseudo-√©l√©ments du premier projet:');
                console.log(`  - ::before content: ${beforeStyle.content}`);
                console.log(`  - ::before opacity: ${beforeStyle.opacity}`);
                console.log(`  - ::after content: ${afterStyle.content}`);
                console.log(`  - ::after opacity: ${afterStyle.opacity}`);
            }
        }

        // Lancer le test automatiquement au chargement
        setTimeout(testProjectHoverEffects, 1000);

        // Raccourci clavier pour relancer le test (touche P)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'p' || e.key === 'P') {
                console.log('üîÑ Relancement du test des effets de survol (touche P)');
                testProjectHoverEffects();
            }
        });
    </script>
    <script src="scroll-fix.js"></script>
    <script src="scroll-diagnostic.js"></script>
</body>